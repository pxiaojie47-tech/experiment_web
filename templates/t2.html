<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>T2 延迟问卷</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --text:#111; --muted:#555; --line:#e9e9ef;
      --primary:#1e66ff; --chip:#fafbff; --danger:#d93025;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
      padding:32px 18px;
    }
    .wrap{max-width:980px;margin:0 auto}
    .card{
      background:var(--card); border-radius:16px; padding:26px 26px 18px;
      box-shadow:0 10px 30px rgba(0,0,0,.06);
    }
    h1{margin:0 0 10px;font-size:40px}
    .sub{margin:0 0 18px;color:var(--muted);line-height:1.6}
    .pid{font-weight:800}
    .hint{
      margin:10px 0 18px; padding:12px 14px; border:1px solid var(--line);
      background:#fcfcff; border-radius:12px; color:#333; font-size:14px; line-height:1.6;
    }
    .section{margin-top:18px;padding-top:14px;border-top:1px dashed var(--line)}
    .section h2{margin:0 0 12px;font-size:18px;color:#222}
    .q{
      margin:14px 0; padding:14px 14px 12px;
      border:1px solid var(--line); border-radius:14px; background:#fff;
    }
    .qtitle{margin:0 0 10px;font-weight:800;line-height:1.5}
    .req{color:var(--danger);font-weight:800;margin-left:6px}
    .scale{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .opt{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid #d8dbe6;background:var(--chip);
      padding:8px 12px;border-radius:999px;cursor:pointer;user-select:none;
    }
    .opt:hover{border-color:#b8c6ff}
    input[type="radio"]{transform:scale(1.1)}
    .anchors{display:flex;justify-content:space-between;color:#666;font-size:12.5px;margin-top:8px;padding:0 4px}
    .actions{display:flex;gap:12px;align-items:center;margin-top:18px;padding-top:14px;border-top:1px solid var(--line)}
    .btn{border:none;background:var(--primary);color:#fff;padding:12px 16px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer}
    .mini{color:#666;font-size:13px;line-height:1.5}
    .errbox{
      display:none;margin-top:12px;padding:12px 14px;border:1px solid #ffd6d6;background:#fff5f5;
      color:#7a1f1f;border-radius:12px;line-height:1.55;font-size:14px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Page 8｜T2 延迟问卷 ✅</h1>
      <p class="sub">participant_id：<span class="pid">{{ participant_id }}</span></p>

      <div class="hint">
        请回忆你刚刚的对话体验并作答。量表为 <b>1（非常不同意）</b> 到 <b>7（非常同意）</b>。所有题目必填。
      </div>

      <form method="POST" action="/t2?pid={{ participant_id }}" id="t2Form">

        <!-- Maintained Interest (3) -->
        <div class="section">
          <h2>一、维持兴趣（Maintained Interest）</h2>

          <div class="q">
            <p class="qtitle">MI1. 在结束对话后，我仍对该话题保持兴趣<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="mi1" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">MI2. 我愿意在之后继续探索相关内容<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="mi2" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">MI3. 我愿意把这个主题纳入自己的后续学习/创作计划<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="mi3" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>
        </div>

        <!-- Support (3) -->
        <div class="section">
          <h2>二、支持感知（Perceived Support）</h2>

          <div class="q">
            <p class="qtitle">S1. 我认为对话对我起到了实质性的帮助<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="s1" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">S2. 我愿意在未来继续使用类似方式获得支持<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="s2" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">S3. 我觉得这种对话形式总体上是有用的<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="s3" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>
        </div>

        <!-- Clarity (3) -->
        <div class="section">
          <h2>三、清晰感（Clarity）</h2>

          <div class="q">
            <p class="qtitle">C1. 在结束对话后，我对自己的方向仍然清晰<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="c1" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">C2. 我能清楚说出下一步行动是什么<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="c2" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>

          <div class="q">
            <p class="qtitle">C3. 我认为对话带来的思路整理是“可延续”的<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="c3" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>
        </div>

        <!-- Continue Intention (1) -->
        <div class="section">
          <h2>四、持续使用意愿（Continuation Intention）</h2>

          <div class="q">
            <p class="qtitle">CONT1. 如果有机会，我愿意继续使用该系统完成类似任务<span class="req">*</span></p>
            <div class="scale">
              {% for v in range(1,8) %}
                <label class="opt"><input type="radio" name="cont1" value="{{ v }}" required> {{ v }}</label>
              {% endfor %}
            </div>
            <div class="anchors"><span>非常不同意</span><span>非常同意</span></div>
          </div>
        </div>

        <div class="actions">
          <button class="btn" type="submit">提交并完成 T2</button>
          <div class="mini">提交后将进入完成页。</div>
        </div>

        <div class="errbox" id="errBox"></div>
      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById("t2Form");
    const errBox = document.getElementById("errBox");
    form.addEventListener("submit", (e) => {
      errBox.style.display = "none";
      errBox.textContent = "";

      const requiredNames = new Set();
      form.querySelectorAll('input[type="radio"][required]').forEach(r => requiredNames.add(r.name));

      for (const name of requiredNames) {
        const anyChecked = !!form.querySelector(`input[name="${name}"]:checked`);
        if (!anyChecked) {
          e.preventDefault();
          errBox.style.display = "block";
          errBox.textContent = `你还有题目未作答：请完成 ${name.toUpperCase()}（标*的必填）。`;
          const el = form.querySelector(`input[name="${name}"]`);
          if (el) el.scrollIntoView({behavior:"smooth", block:"center"});
          return;
        }
      }
    });
  </script>
</body>
</html>
